<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>慕予博客</title>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"
    integrity="sha256-WCzAhd2P6gRJF9Hv3oOOd+hFJi/QJbv+Azn4CGB8gfY=" crossorigin="anonymous" defer></script>
  <script src="/js/index.js" defer></script>
  <script src="/js/prompt.js" defer></script>
  <script src="/js/keyboard.js" defer></script>
  <script src="/js/tab.js" defer></script>
  <script src="/js/commands.js" defer></script>
  <script src="/js/config.js" defer></script><script src="/config.js"></script><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="style.css"><link rel="stylesheet" href="/css/page.css"></head><body onkeydown='exec(event)' style='background-image: url("/assets/background.jpg");'><main>
      <div class="files" id="files" tabindex="0">
<ul>

  <li class="file">
    <span><a href='https://ilikexff.cn/8-kuan-rang-ni-kai-fa-qi-fei-de-intellijidea-cha-jian/'
      tabindex="-2">  8款让你开发起飞的IntellijIDEA插件</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/aop-jie-mi-qie-mian-bian-cheng-de-zong-he-zhi-nan/'
      tabindex="-3">  AOP揭秘：切面编程的综合指南</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-mei-ju-pian-yi-wu-fan-wei-mei-ju/'
      tabindex="-4">  C++游戏开发基础-枚举篇一：无范围枚举</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-std-optional/'
      tabindex="-5">  C++游戏开发基础-深入解析std::optional</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-shen-ru-jie-xi-thiszhi-zhen-de-ying-yong-yu-ji-qiao/'
      tabindex="-6">  C++游戏开发基础-深入解析this指针的应用与技巧</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-fu-zhi-gou-zao-han-shu/'
      tabindex="-7">  C++游戏开发基础-深入解析复制构造函数</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-lei-mo-ban-he-can-shu-tui-dao-zhi-nan/'
      tabindex="-8">  C++游戏开发基础-类模版和参数推导指南</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/dockerbi-zhi-bi-hui/'
      tabindex="-9">  Docker必知必会</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/githithub-xiao-ce/'
      tabindex="-10">  GitGitHub小册</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/google-hacking/'
      tabindex="-11">  Google Hacking</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/googleguan-fang-ti-shi-gong-cheng-bai-pi-shu-zhong-wen-yi-ben/'
      tabindex="-12">  Google官方《提示工程白皮书（中文译本）》</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/idea-dai-ma-bu-quan-ti-shi-gong-neng-xiao-shi-de-ji-chong-jie-jue-fang-an-re-geng-ban/'
      tabindex="-13">  IDEA代码补全&amp;提示功能消失的几种解决方案(热更版)</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/idea-chen-jin-shi-bian-cheng-ti-yan/'
      tabindex="-14">  IDEA沉浸式编程体验</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/java-han-shu-shi-bian-cheng/'
      tabindex="-15">  Java函数式编程</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/java-ji-he-yuan-ma-qian-xi/'
      tabindex="-16">  Java集合源码浅析</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/mysql-shi-wu-te-xing-yu-ge-chi-ji-bie-xiang-jie/'
      tabindex="-17">  MySQL_事务特性与隔离级别详解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ocao-zuo-fu-shi-xian-mei-ju-de-shu-ru-shu-chu/'
      tabindex="-18">  O操作符,实现枚举的输入输出</a></span>
  </li><li class="file">
    <span><a class="selected"href='https://ilikexff.cn/prdsuan-fa-ting-shuo-ni-xiang-ping-yun-qi-chou-yi-ke-rong-yao-shui-jing/'
      tabindex="-19">  PRD算法：听说你想凭运气抽一颗荣耀水晶?</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/picgo-pei-zhi-ge-chong-tu-chuang/'
      tabindex="-20">  PicGo配置各种图床</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/redis-bi-zhi-bi-hui/'
      tabindex="-21">  Redis必知必会</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/rust-zhong-de-move-yu-yi-sui-bi/'
      tabindex="-22">  Rust中的move语义随笔</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ssm-kuang-jia-shi-xian-ji-cheng-duan-xin-yan-zheng-ma-gong-neng/'
      tabindex="-23">  SSM框架实现集成短信验证码功能</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/slf4jyu-logbackshi-yong-zhi-nan-ji-yu-gradle/'
      tabindex="-24">  Slf4j与Logback实用指南(基于Gradle)</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/spring-security5-xdao-spring-security6-xde-qian-yi/'
      tabindex="-25">  Spring Security5.x到Spring Security6.x的迁移</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/springboot-webkai-fa-jing-jie/'
      tabindex="-26">  SpringBoot Web开发精解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/springsecurity/'
      tabindex="-27">  SpringSecurity</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/unity6xia-jia-zhong-guo-qu-tuan-jie-yin-qing-jie-bang-zhe-shi-fen-lie-huan-shi-ben-di-hua-de-kai-shi/'
      tabindex="-28">  Unity6下架中国区，团结引擎接棒：这是分裂，还是本地化的开始？</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/vim-cong-0-dao-1-da-zao-quan-yu-yan-zhi-chi-de-mo-neng-bian-ji-qi-yu-fa-pian/'
      tabindex="-29">  Vim从0到1打造全语言支持的万能编辑器-语法篇</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/vim-tiao-tou-powershell-pian/'
      tabindex="-30">  Vim折腾之 PowerShell篇</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-di-zhi-chuan-di-xiang-jie/'
      tabindex="-31">  [C++游戏开发基础]:地址传递详解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-yin-yong-fan-hui-he-di-zhi-fan-hui/'
      tabindex="-32">  [C++游戏开发基础]:引用返回和地址返回</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-zhi-zhen-he-const/'
      tabindex="-33">  [C++游戏开发基础]:指针和const</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-shu-ju-feng-zhuang-yin-cang-de-hao-chu/'
      tabindex="-34">  [C++游戏开发基础]:数据封装(隐藏)的好处</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-gou-zao-han-shu-qian-xi-8000zi/'
      tabindex="-35">  [C++游戏开发基础]:构造函数浅析(8000字)</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-li-jie-kong-zhi-zhen/'
      tabindex="-36">  [C++游戏开发基础]:理解空指针</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-lei-zhong-de-fang-wen-han-shu/'
      tabindex="-37">  [C++游戏开发基础]:类中的访问函数</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-zhi-zhen-de-ji-ben-gai-nian-li-jie/'
      tabindex="-38">  [C++游戏开发基础]指针的基本概念理解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/fanatical-wu-yue-feng-kuang-te-hui-wei-ni-de-steam-ku-jia-dian-liao/'
      tabindex="-39">  _Fanatical 五月疯狂特惠：为你的 Steam 库加点料！</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/rust-kai-yuan-mi-ma-gong-ju-xpwd-zhong-wen-ban-bian-geng-ri-zhi/'
      tabindex="-40">  _Rust开源密码工具xpwd中文版变更日志</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/readme/'
      tabindex="-41">  readme</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/wblog-bo-ke-xian-shang-bu-shu/'
      tabindex="-42">  wblog博客线上部署</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/shang-gu-shen-qi-vim-su-cheng-bei-wang-lu/'
      tabindex="-43">  上古神器_Vim速成备忘录</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/mian-fei-ji-huo-quan-ban-ben-typora-zui-xin-ban-wei-li/'
      tabindex="-44">  免费激活全版本Typora，最新版为例</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/guan-yu-lombokxian-wei-ren-zhi-de-ji-ge-qi-ji-yin-qiao/'
      tabindex="-45">  关于Lombok鲜为人知的几个奇技淫巧</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/guan-yu-jie-kou-xian-liu-de-yi-ci-jian-dan-shi-jian/'
      tabindex="-46">  关于接口限流的一次简单实践</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/tu-jie-er-jin-zhi/'
      tabindex="-47">  图解二进制</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ru-he-xie-de-yi-shou-you-ya-gui-fan-de-springboot-jie-kou/'
      tabindex="-48">  如何写得一手优雅规范的SpringBoot 接口？</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/kai-fa-bi-hui-xi-lie-jwtqian-tan/'
      tabindex="-49">  开发必会系列_JWT浅谈</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ji-qiao-jiu-shi-xiao-lu-chatgpt-diao-jiao-zhi-bei/'
      tabindex="-50">  技巧就是效率，ChatGPT调教指北</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ti-sheng-intellij-kai-fa-xiao-lu-zhe-kuan-dai-ma-tu-ding-cha-jian-codepins-zhi-de-yi-shi/'
      tabindex="-51">  提升 IntelliJ 开发效率？这款代码图钉插件 CodePins 值得一试</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ti-wen-de-zhi-hui-zhuan-zai/'
      tabindex="-52">  提问的智慧转载</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xiao-lu-gong-ju-markdown/'
      tabindex="-53">  效率工具Markdown</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/wu-wei-bing-fa-rust-sheng-ming-zhou-qi-qian-tan/'
      tabindex="-54">  无畏并发_Rust 生命周期浅谈</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/you-xi-kai-fa-yu-de-bei-sai-er-qu-xian-gan-shou-si-hua-de-shu-xue-zhi-mei/'
      tabindex="-55">  游戏开发与的贝塞尔曲线_感受丝滑的数学之美</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/you-xi-kai-fa-bi-bei-gao-xiao-de-aabb-qiu-ti-he-obb-peng-zhuang-jian-ce-suan-fa/'
      tabindex="-56">  游戏开发必备：高效的 AABB、球体和 OBB 碰撞检测算法</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/you-xi-suan-fa-ji-chu-a-xun-lu-suan-fa-chi-xu-wei-hu/'
      tabindex="-57">  游戏算法基础-深入解析A*寻路算法</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/du-li-you-xi-kai-fa-zhe-gong-ju-xiang-2025jing-xuan-tui-jian-yu-shi-yong-zhi-nan/'
      tabindex="-58">  独立游戏开发者工具箱：2025精选推荐与实用指南</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xu-huan-yin-qing-you-xi-kai-fa-xi-lie-zhuan-ti-guan-fang-bian-ma-biao-zhun-huo-gui-yue/'
      tabindex="-59">  虚幻引擎游戏开发系列专题-官方编码标准或规约</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xiang-jie-she-ji-mo-shi-dan-li-de-jin-hua-zhi-lu/'
      tabindex="-60">  详解设计模式_单例的进化之路</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xie-e-de-fei-chang-liang-quan-ju-bian-liang/'
      tabindex="-61">  邪恶的非常量全局变量</a></span>
  </li>
</ul>
</div>
      <div class="viewer page" id="viewer" tabindex="0">
        <div class="tab">
<div class="file-manager" onclick='document.getElementById("files").classList.toggle("open"); document.getElementById("content").classList.toggle("close")'> </div>
<ul id="tabs">
</ul>


</div>
        <div class="content" id="content"><p><img src="https://images.waer.ltd/notes/PRD.jpg" alt="PRD" loading="lazy" decoding="async" /></p>
<p><code>PRD</code>算法全称<code>Pseudo-Random Distribution</code>。是概率分布中的一种常见算法，在游戏开发领域中很常用。</p>
<p><code>PRD</code>用于控制随机事件的触发概率，使其表现得更加符合预期，相比于传统得随机数生成，<code>PRD</code>算法可以平滑得控制随机事件的触发次数，确保不会出现过于极端的情况，比如长时间未触发或者频繁触发。</p>
<blockquote>
<p>如果你觉得它离你很远，那么举个栗子，玩“王者荣耀”的多少都知道其中有一个道具叫<strong>荣耀水晶</strong>，这玩意就是靠抽奖的方式获得的，而根据官方抽奖的方式与概率公布等信息来看，抽取荣耀水晶的算法大概率也是<code>PRD</code>或者它的变种算法。</p>
</blockquote>
<p>在游戏中，<code>PRD</code>算法的主要应用场景包括掉落系统、抽奖系统等。这些场景下，开发者通常希望在随机事件的发生上保持某种平衡，而<code>PRD</code>算法正是为了解决这一问题。</p>
<hr />
<h2 id="">基本原理</h2>
<p><code>PRD</code>算法通过调整事件发生的概率来实现分布平滑。简单来说，它会随着事件未触发的次数增加，动态提升触发的概率，直到事件发生。一旦事件触发，概率会重置为初始值，重新开始计算。</p>
<p><code>PRD</code>的公式通常为：$ P(n) = \frac{1}{k-f(n)}$</p>
<p>其中，<code>P(n)</code> 是事件在第 <code>n</code> 次尝试时的概率，<code>k</code> 是一个常数（通常设为 1），<code>f(n)</code> 是一个随尝试次数递增的函数，用于控制概率的增长。这个公式的作用是保证随着尝试次数的增加，概率不断增大，直至事件发生。</p>
<hr />
<h2 id="-1">基本实现</h2>
<blockquote>
<p>下面就以使用<code>PRD</code>算法模拟抽取荣耀水晶的方式带着各位实现一下<code>PRD</code>算法吧!</p>
</blockquote>
<ul>
<li>
<p><strong>初始概率与递增概率</strong>：使用<code>PRD</code>算法，逐步提高未中奖后的中奖概率。</p>
</li>
<li>
<p><strong>保底次数</strong>：设置一个保底的次数上限，在达到该上限时，无论当前概率如何，玩家都会中奖。</p>
</li>
<li>
<p><strong>中奖后重置</strong>：当玩家中奖后，概率重置为初始值，并重新开始计算。</p>
</li>
</ul>
<hr />
<pre data-lang="cpp" style="background-color:#2b303b;color:#c0c5ce;" class="language-cpp "><code class="language-cpp" data-lang="cpp"><span style="color:#b48ead;">#include</span><span>&lt;</span><span style="color:#a3be8c;">iostream</span><span>&gt;
</span><span style="color:#b48ead;">#include</span><span>&lt;</span><span style="color:#a3be8c;">cstdlib</span><span>&gt;
</span><span style="color:#b48ead;">#include</span><span>&lt;</span><span style="color:#a3be8c;">ctime</span><span>&gt;
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">PRDWithPity
</span><span style="color:#eff1f5;">{
</span><span style="color:#b48ead;">private</span><span style="color:#eff1f5;">:
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">double</span><span style="color:#eff1f5;"> initialProb; </span><span style="color:#65737e;">// 初始中奖概率
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">double</span><span style="color:#eff1f5;"> increment; </span><span style="color:#65737e;">// 每次中奖时增加的概率
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">double</span><span style="color:#eff1f5;"> currentProb; </span><span style="color:#65737e;">// 当前中奖概率
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">int</span><span style="color:#eff1f5;"> pityLimit; </span><span style="color:#65737e;">// 保底次数
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">int</span><span style="color:#eff1f5;"> currentTry; </span><span style="color:#65737e;">// 当前抽奖次数
</span><span style="color:#eff1f5;">
</span><span style="color:#b48ead;">public</span><span style="color:#eff1f5;">:
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">// 构造函数、初始化初始概率、递增概率和保底次数
</span><span style="color:#eff1f5;">    </span><span style="color:#8fa1b3;">PRDWithPity </span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">double </span><span style="color:#bf616a;">initProb </span><span>= </span><span style="color:#d08770;">0.05</span><span style="color:#eff1f5;">,</span><span style="color:#b48ead;">double </span><span style="color:#bf616a;">inc </span><span>= </span><span style="color:#d08770;">0.02</span><span style="color:#eff1f5;">,</span><span style="color:#b48ead;">int </span><span style="color:#bf616a;">pity </span><span>= </span><span style="color:#d08770;">10</span><span style="color:#eff1f5;">) :
</span><span style="color:#eff1f5;">    </span><span style="color:#bf616a;">initialProb</span><span style="color:#eff1f5;">(initProb),</span><span style="color:#bf616a;">increment</span><span style="color:#eff1f5;">(inc),</span><span style="color:#bf616a;">currentProb</span><span style="color:#eff1f5;">(initProb),</span><span style="color:#bf616a;">pityLimit</span><span style="color:#eff1f5;">(pity),</span><span style="color:#bf616a;">currentTry</span><span style="color:#eff1f5;">(</span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">) {}
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">bool </span><span style="color:#8fa1b3;">draw</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">    {
</span><span style="color:#eff1f5;">        currentTry</span><span>++</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#65737e;">// 达到保底，直接中奖
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(currentTry </span><span>&gt;=</span><span style="color:#eff1f5;"> pityLimit)
</span><span style="color:#eff1f5;">        {
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">reset</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">            </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">true</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#65737e;">// 生成0-1随机数
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">double</span><span style="color:#eff1f5;"> randNum </span><span>= static_cast</span><span style="color:#eff1f5;">&lt;</span><span style="color:#b48ead;">double</span><span style="color:#eff1f5;">&gt;(</span><span style="color:#96b5b4;">rand</span><span style="color:#eff1f5;">()) </span><span>/</span><span style="color:#eff1f5;"> RAND_MAX;
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">        </span><span style="color:#65737e;">// 如果随机数小于当前概率、表示中奖
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">if </span><span style="color:#eff1f5;">(randNum </span><span>&lt;</span><span style="color:#eff1f5;"> currentProb)
</span><span style="color:#eff1f5;">        {
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">reset</span><span style="color:#eff1f5;">();
</span><span style="color:#eff1f5;">            </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">true</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">        }</span><span style="color:#b48ead;">else
</span><span style="color:#eff1f5;">        {
</span><span style="color:#eff1f5;">           currentProb </span><span>+=</span><span style="color:#eff1f5;"> increment;
</span><span style="color:#eff1f5;">            </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">false</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">    }
</span><span style="color:#eff1f5;">
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">// reset函数
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">void </span><span style="color:#8fa1b3;">reset</span><span style="color:#eff1f5;">()
</span><span style="color:#eff1f5;">    {
</span><span style="color:#eff1f5;">        currentProb </span><span>=</span><span style="color:#eff1f5;"> initialProb;
</span><span style="color:#eff1f5;">        currentTry </span><span>= </span><span style="color:#d08770;">0</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">    }
</span><span style="color:#eff1f5;">}</span><span>;
</span></code></pre>
<blockquote>
<p>实现代码大致如上，没什么复杂的逻辑，关键地方也都添加了注释，这里就不再赘述了。</p>
</blockquote>
<p>下面模拟测试一下看看效果</p>
<pre data-lang="cpp" style="background-color:#2b303b;color:#c0c5ce;" class="language-cpp "><code class="language-cpp" data-lang="cpp"><span style="color:#b48ead;">int </span><span style="color:#8fa1b3;">main</span><span>()
</span><span>{
</span><span>    </span><span style="color:#96b5b4;">srand</span><span>(static_cast&lt;</span><span style="color:#b48ead;">unsigned</span><span>&gt;(</span><span style="color:#96b5b4;">time</span><span>(</span><span style="color:#d08770;">0</span><span>)));  </span><span style="color:#65737e;">// 初始化随机数种子
</span><span>    PRDWithPity </span><span style="color:#bf616a;">prd</span><span>(</span><span style="color:#d08770;">0.000001</span><span>, </span><span style="color:#d08770;">0.0000002</span><span>, </span><span style="color:#d08770;">360</span><span>);  </span><span style="color:#65737e;">// 初始中奖概率0.05，每次未中奖增加0.02，保底次数10次
</span><span>    </span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">int</span><span> i = </span><span style="color:#d08770;">1</span><span>; i &lt;= </span><span style="color:#d08770;">365</span><span>; ++i) {
</span><span>        </span><span style="color:#b48ead;">if </span><span>(prd.</span><span style="color:#bf616a;">draw</span><span>()) {
</span><span>            std::cout &lt;&lt; &quot;</span><span style="color:#a3be8c;">恭喜屏幕前这位大佬第 </span><span>&quot; &lt;&lt; i &lt;&lt; &quot;</span><span style="color:#a3be8c;"> 次抽中一颗[荣耀水晶]</span><span>&quot; &lt;&lt; std::endl;
</span><span>        } </span><span style="color:#b48ead;">else </span><span>{
</span><span>            std::cout &lt;&lt; &quot;</span><span style="color:#a3be8c;">第 </span><span>&quot; &lt;&lt; i &lt;&lt; &quot;</span><span style="color:#a3be8c;"> 次抽奖未中奖，幸运值+1，幸运值为： </span><span>&quot;
</span><span>                      &lt;&lt; prd.</span><span style="color:#bf616a;">getCurrentTry</span><span>()
</span><span>                      &lt;&lt; &quot;</span><span style="color:#a3be8c;">，幸运值达到360必中一颗[荣耀水晶]。</span><span>&quot; &lt;&lt; std::endl;
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">0</span><span>;
</span><span>}
</span></code></pre>
<blockquote>
<p>由于我们必须保证在触发保底之前中奖的概率足够低，因此这里直接将初始中奖率设置为<code>0.000001</code>也就是十万分之一，每次抽奖后递增中奖率也不能过高，比如可以设置在<code>0.0000002</code>（百万分之一）。这样可以保证在触发保底之前你大概率是不会抽到 <strong>荣耀水晶</strong>的，只能通过氪金不断的获取抽奖机会，直到抽够<code>360</code>次触发保底。</p>
</blockquote>
<p><strong>下面是本次抽奖的模拟结果:</strong></p>
<p>第 1 次抽奖未中奖，幸运值+1，幸运值为： 1，幸运值达到360必中一颗[荣耀水晶]。
第 2 次抽奖未中奖，幸运值+1，幸运值为： 2，幸运值达到360必中一颗[荣耀水晶]。
第 3 次抽奖未中奖，幸运值+1，幸运值为： 3，幸运值达到360必中一颗[荣耀水晶]。
第 4 次抽奖未中奖，幸运值+1，幸运值为： 4，幸运值达到360必中一颗[荣耀水晶]。
第 5 次抽奖未中奖，幸运值+1，幸运值为： 5，幸运值达到360必中一颗[荣耀水晶]。
第 6 次抽奖未中奖，幸运值+1，幸运值为： 6，幸运值达到360必中一颗[荣耀水晶]。
第 7 次抽奖未中奖，幸运值+1，幸运值为： 7，幸运值达到360必中一颗[荣耀水晶]。
第 8 次抽奖未中奖，幸运值+1，幸运值为： 8，幸运值达到360必中一颗[荣耀水晶]。
第 9 次抽奖未中奖，幸运值+1，幸运值为： 9，幸运值达到360必中一颗[荣耀水晶]。
第 10 次抽奖未中奖，幸运值+1，幸运值为： 10，幸运值达到360必中一颗[荣耀水晶]。
第 11 次抽奖未中奖，幸运值+1，幸运值为： 11，幸运值达到360必中一颗[荣耀水晶]。
第 12 次抽奖未中奖，幸运值+1，幸运值为： 12，幸运值达到360必中一颗[荣耀水晶]。
第 13 次抽奖未中奖，幸运值+1，幸运值为： 13，幸运值达到360必中一颗[荣耀水晶]。
第 14 次抽奖未中奖，幸运值+1，幸运值为： 14，幸运值达到360必中一颗[荣耀水晶]。</p>
<p>[次数省略好多行]…………………..</p>
<p>第 348 次抽奖未中奖，幸运值+1，幸运值为： 348，幸运值达到360必中一颗[荣耀水晶]。
第 349 次抽奖未中奖，幸运值+1，幸运值为： 349，幸运值达到360必中一颗[荣耀水晶]。
第 350 次抽奖未中奖，幸运值+1，幸运值为： 350，幸运值达到360必中一颗[荣耀水晶]。
第 351 次抽奖未中奖，幸运值+1，幸运值为： 351，幸运值达到360必中一颗[荣耀水晶]。
第 352 次抽奖未中奖，幸运值+1，幸运值为： 352，幸运值达到360必中一颗[荣耀水晶]。
第 353 次抽奖未中奖，幸运值+1，幸运值为： 353，幸运值达到360必中一颗[荣耀水晶]。
第 354 次抽奖未中奖，幸运值+1，幸运值为： 354，幸运值达到360必中一颗[荣耀水晶]。
第 355 次抽奖未中奖，幸运值+1，幸运值为： 355，幸运值达到360必中一颗[荣耀水晶]。
第 356 次抽奖未中奖，幸运值+1，幸运值为： 356，幸运值达到360必中一颗[荣耀水晶]。
第 357 次抽奖未中奖，幸运值+1，幸运值为： 357，幸运值达到360必中一颗[荣耀水晶]。
第 358 次抽奖未中奖，幸运值+1，幸运值为： 358，幸运值达到360必中一颗[荣耀水晶]。
第 359 次抽奖未中奖，幸运值+1，幸运值为： 359，幸运值达到360必中一颗[荣耀水晶]。
<strong>恭喜屏幕前这位大佬第 360 次抽中一颗[荣耀水晶]</strong>
第 361 次抽奖未中奖，幸运值+1，幸运值为： 1，幸运值达到360必中一颗[荣耀水晶]。
第 362 次抽奖未中奖，幸运值+1，幸运值为： 2，幸运值达到360必中一颗[荣耀水晶]。
第 363 次抽奖未中奖，幸运值+1，幸运值为： 3，幸运值达到360必中一颗[荣耀水晶]。
第 364 次抽奖未中奖，幸运值+1，幸运值为： 4，幸运值达到360必中一颗[荣耀水晶]。
第 365 次抽奖未中奖，幸运值+1，幸运值为： 5，幸运值达到360必中一颗[荣耀水晶]。</p>
<hr />
<h2 id="-2">PRD的优点</h2>
<p><strong>平衡性</strong>：<code>PRD</code>通过调整概率，使得随机事件更加平衡。例如，在掉落系统中，<code>PRD</code>确保物品不会长时间不掉落，也不会短时间内频繁掉落。</p>
<p><strong>易于控制</strong>：开发者可以通过调节初始概率或递增函数的参数，来控制事件的发生频率和分布特性。</p>
<p><strong>提升用户体验</strong>：<code>PRD</code>可以防止用户在面对纯粹的随机系统时感到挫败，尤其是游戏中的奖励机制，通过PRD可以避免极端运气差的情况。</p>
<p>当然了，算法并非一成不变的，具体实现还得基于我们在开发业务中的具体需求来决定是否对原算法进行扩展、优化、变种。</p>
<p>比如下面这些扩展建议：</p>
<blockquote>
<ol>
<li><strong>递增机制</strong>：可以根据具体需求将递增值设计为动态调整，而不仅仅是固定值。</li>
<li><strong>外部配置</strong>：如果<code>PRD</code>用于实际的游戏开发中，概率和递增值通常从外部配置表中读取，而不是硬编码在程序中。</li>
</ol>
</blockquote>
<hr />
<h2 id="-3">小结</h2>
<p>如果你不从事游戏开发相关领域工作，那么这篇文章可以帮你了解身边游戏抽奖的中奖机制和原理，在面对华丽的游戏虚拟道具抽奖时，请务必保持<strong>理性消费</strong>(有钱人忽略,因为本质就是来圈你们这些所谓有钱人的<strong>RMB</strong>滴!)代码面前，不要对自己的运气抱有过高的自信!</p>
<p>如果你是一个即将或者是正在从事游戏开发工作，那么学无止境，共勉!</p>
<blockquote>
<p>这是一个连载的专题，欢迎持续关注哦！</p>
</blockquote>

        </div>
      </div>
      <div class="prompt" id="terminal"><input
    type="text"
    id="setter"
    onkeydown="writeit(this, event);moveIt(this.value.length, event)"
    onchange="writeit(this, event)"
    onkeyup="writeit(this, event)"
    onkeypress="writeit(this, event);"
    >
<label for="setter" id="writer"> </label><b class="cursor" id="cursor"></b></div>
      <footer class="footer">
        <div class="footer-content">
          <p class="icp-info">
            <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer">黔ICP备2021010295号</a>
          </p>
        </div>
      </footer>
    </main>
  </body>

</html>
