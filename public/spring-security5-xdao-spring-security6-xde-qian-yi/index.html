<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>慕予博客</title>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"
    integrity="sha256-WCzAhd2P6gRJF9Hv3oOOd+hFJi/QJbv+Azn4CGB8gfY=" crossorigin="anonymous" defer></script>
  <script src="/js/index.js" defer></script>
  <script src="/js/prompt.js" defer></script>
  <script src="/js/keyboard.js" defer></script>
  <script src="/js/tab.js" defer></script>
  <script src="/js/commands.js" defer></script>
  <script src="/js/config.js" defer></script><script src="/config.js"></script><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="style.css"><link rel="stylesheet" href="/css/page.css"></head><body onkeydown="exec(event)" style="background-image: url(&quot;&#x2F;assets&#x2F;bg.jpg&quot;); "><main>
      <div class="files" id="files" tabindex="0">
<ul>

  <li class="file">
    <span><a href='https://ilikexff.cn/8-kuan-rang-ni-kai-fa-qi-fei-de-intellijidea-cha-jian/'
      tabindex="-2">  8款让你开发起飞的IntellijIDEA插件</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/aop-jie-mi-qie-mian-bian-cheng-de-zong-he-zhi-nan/'
      tabindex="-3">  AOP揭秘：切面编程的综合指南</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-mei-ju-pian-yi-wu-fan-wei-mei-ju/'
      tabindex="-4">  C++游戏开发基础-枚举篇一：无范围枚举</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-std-optional/'
      tabindex="-5">  C++游戏开发基础-深入解析std::optional</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-shen-ru-jie-xi-thiszhi-zhen-de-ying-yong-yu-ji-qiao/'
      tabindex="-6">  C++游戏开发基础-深入解析this指针的应用与技巧</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-fu-zhi-gou-zao-han-shu/'
      tabindex="-7">  C++游戏开发基础-深入解析复制构造函数</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-lei-mo-ban-he-can-shu-tui-dao-zhi-nan/'
      tabindex="-8">  C++游戏开发基础-类模版和参数推导指南</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/dockerbi-zhi-bi-hui/'
      tabindex="-9">  Docker必知必会</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/githithub-xiao-ce/'
      tabindex="-10">  GitGitHub小册</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/google-hacking/'
      tabindex="-11">  Google Hacking</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/googleguan-fang-ti-shi-gong-cheng-bai-pi-shu-zhong-wen-yi-ben/'
      tabindex="-12">  Google官方《提示工程白皮书（中文译本）》</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/idea-dai-ma-bu-quan-ti-shi-gong-neng-xiao-shi-de-ji-chong-jie-jue-fang-an-re-geng-ban/'
      tabindex="-13">  IDEA代码补全&amp;提示功能消失的几种解决方案(热更版)</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/idea-chen-jin-shi-bian-cheng-ti-yan/'
      tabindex="-14">  IDEA沉浸式编程体验</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/java-han-shu-shi-bian-cheng/'
      tabindex="-15">  Java函数式编程</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/java-ji-he-yuan-ma-qian-xi/'
      tabindex="-16">  Java集合源码浅析</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/mysql-shi-wu-te-xing-yu-ge-chi-ji-bie-xiang-jie/'
      tabindex="-17">  MySQL_事务特性与隔离级别详解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ocao-zuo-fu-shi-xian-mei-ju-de-shu-ru-shu-chu/'
      tabindex="-18">  O操作符,实现枚举的输入输出</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/prdsuan-fa-ting-shuo-ni-xiang-ping-yun-qi-chou-yi-ke-rong-yao-shui-jing/'
      tabindex="-19">  PRD算法：听说你想凭运气抽一颗荣耀水晶?</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/picgo-pei-zhi-ge-chong-tu-chuang/'
      tabindex="-20">  PicGo配置各种图床</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/redis-bi-zhi-bi-hui/'
      tabindex="-21">  Redis必知必会</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/rust-zhong-de-move-yu-yi-sui-bi/'
      tabindex="-22">  Rust中的move语义随笔</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ssm-kuang-jia-shi-xian-ji-cheng-duan-xin-yan-zheng-ma-gong-neng/'
      tabindex="-23">  SSM框架实现集成短信验证码功能</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/slf4jyu-logbackshi-yong-zhi-nan-ji-yu-gradle/'
      tabindex="-24">  Slf4j与Logback实用指南(基于Gradle)</a></span>
  </li><li class="file">
    <span><a class="selected"href='https://ilikexff.cn/spring-security5-xdao-spring-security6-xde-qian-yi/'
      tabindex="-25">  Spring Security5.x到Spring Security6.x的迁移</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/springboot-webkai-fa-jing-jie/'
      tabindex="-26">  SpringBoot Web开发精解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/springsecurity/'
      tabindex="-27">  SpringSecurity</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/unity6xia-jia-zhong-guo-qu-tuan-jie-yin-qing-jie-bang-zhe-shi-fen-lie-huan-shi-ben-di-hua-de-kai-shi/'
      tabindex="-28">  Unity6下架中国区，团结引擎接棒：这是分裂，还是本地化的开始？</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/vim-cong-0-dao-1-da-zao-quan-yu-yan-zhi-chi-de-mo-neng-bian-ji-qi-yu-fa-pian/'
      tabindex="-29">  Vim从0到1打造全语言支持的万能编辑器-语法篇</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/vim-tiao-tou-powershell-pian/'
      tabindex="-30">  Vim折腾之 PowerShell篇</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-di-zhi-chuan-di-xiang-jie/'
      tabindex="-31">  [C++游戏开发基础]:地址传递详解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-yin-yong-fan-hui-he-di-zhi-fan-hui/'
      tabindex="-32">  [C++游戏开发基础]:引用返回和地址返回</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-zhi-zhen-he-const/'
      tabindex="-33">  [C++游戏开发基础]:指针和const</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-shu-ju-feng-zhuang-yin-cang-de-hao-chu/'
      tabindex="-34">  [C++游戏开发基础]:数据封装(隐藏)的好处</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-gou-zao-han-shu-qian-xi-8000zi/'
      tabindex="-35">  [C++游戏开发基础]:构造函数浅析(8000字)</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-li-jie-kong-zhi-zhen/'
      tabindex="-36">  [C++游戏开发基础]:理解空指针</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-lei-zhong-de-fang-wen-han-shu/'
      tabindex="-37">  [C++游戏开发基础]:类中的访问函数</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/c-you-xi-kai-fa-ji-chu-zhi-zhen-de-ji-ben-gai-nian-li-jie/'
      tabindex="-38">  [C++游戏开发基础]指针的基本概念理解</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/fanatical-wu-yue-feng-kuang-te-hui-wei-ni-de-steam-ku-jia-dian-liao/'
      tabindex="-39">  _Fanatical 五月疯狂特惠：为你的 Steam 库加点料！</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/rust-kai-yuan-mi-ma-gong-ju-xpwd-zhong-wen-ban-bian-geng-ri-zhi/'
      tabindex="-40">  _Rust开源密码工具xpwd中文版变更日志</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/readme/'
      tabindex="-41">  readme</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/wblog-bo-ke-xian-shang-bu-shu/'
      tabindex="-42">  wblog博客线上部署</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/shang-gu-shen-qi-vim-su-cheng-bei-wang-lu/'
      tabindex="-43">  上古神器_Vim速成备忘录</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/mian-fei-ji-huo-quan-ban-ben-typora-zui-xin-ban-wei-li/'
      tabindex="-44">  免费激活全版本Typora，最新版为例</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/guan-yu-lombokxian-wei-ren-zhi-de-ji-ge-qi-ji-yin-qiao/'
      tabindex="-45">  关于Lombok鲜为人知的几个奇技淫巧</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/guan-yu-jie-kou-xian-liu-de-yi-ci-jian-dan-shi-jian/'
      tabindex="-46">  关于接口限流的一次简单实践</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/tu-jie-er-jin-zhi/'
      tabindex="-47">  图解二进制</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ru-he-xie-de-yi-shou-you-ya-gui-fan-de-springboot-jie-kou/'
      tabindex="-48">  如何写得一手优雅规范的SpringBoot 接口？</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/kai-fa-bi-hui-xi-lie-jwtqian-tan/'
      tabindex="-49">  开发必会系列_JWT浅谈</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ji-qiao-jiu-shi-xiao-lu-chatgpt-diao-jiao-zhi-bei/'
      tabindex="-50">  技巧就是效率，ChatGPT调教指北</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ti-sheng-intellij-kai-fa-xiao-lu-zhe-kuan-dai-ma-tu-ding-cha-jian-codepins-zhi-de-yi-shi/'
      tabindex="-51">  提升 IntelliJ 开发效率？这款代码图钉插件 CodePins 值得一试</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/ti-wen-de-zhi-hui-zhuan-zai/'
      tabindex="-52">  提问的智慧转载</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xiao-lu-gong-ju-markdown/'
      tabindex="-53">  效率工具Markdown</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/wu-wei-bing-fa-rust-sheng-ming-zhou-qi-qian-tan/'
      tabindex="-54">  无畏并发_Rust 生命周期浅谈</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/you-xi-kai-fa-yu-de-bei-sai-er-qu-xian-gan-shou-si-hua-de-shu-xue-zhi-mei/'
      tabindex="-55">  游戏开发与的贝塞尔曲线_感受丝滑的数学之美</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/you-xi-kai-fa-bi-bei-gao-xiao-de-aabb-qiu-ti-he-obb-peng-zhuang-jian-ce-suan-fa/'
      tabindex="-56">  游戏开发必备：高效的 AABB、球体和 OBB 碰撞检测算法</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/you-xi-suan-fa-ji-chu-a-xun-lu-suan-fa-chi-xu-wei-hu/'
      tabindex="-57">  游戏算法基础-深入解析A*寻路算法</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/du-li-you-xi-kai-fa-zhe-gong-ju-xiang-2025jing-xuan-tui-jian-yu-shi-yong-zhi-nan/'
      tabindex="-58">  独立游戏开发者工具箱：2025精选推荐与实用指南</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xu-huan-yin-qing-you-xi-kai-fa-xi-lie-zhuan-ti-guan-fang-bian-ma-biao-zhun-huo-gui-yue/'
      tabindex="-59">  虚幻引擎游戏开发系列专题-官方编码标准或规约</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xiang-jie-she-ji-mo-shi-dan-li-de-jin-hua-zhi-lu/'
      tabindex="-60">  详解设计模式_单例的进化之路</a></span>
  </li><li class="file">
    <span><a href='https://ilikexff.cn/xie-e-de-fei-chang-liang-quan-ju-bian-liang/'
      tabindex="-61">  邪恶的非常量全局变量</a></span>
  </li>
</ul>
</div>
      <div class="viewer page" id="viewer" tabindex="0">
        <div class="tab">
<div class="file-manager" onclick='document.getElementById("files").classList.toggle("open"); document.getElementById("content").classList.toggle("close")'> </div>
<ul id="tabs">
</ul>


</div>
        <div class="content" id="content"><h2 id="1-zhuo-li-ba-suo">1. 啄里吧嗦</h2>
<p>之前有写过一篇关于<code>Spring Security</code>的文章，但那已经是相对比较旧的版本了，就目前<code>Spring Security6.0</code>来说，这其中出现了不少的变动和更新，很多<code>API</code>的使用也是有不小的变化，所以我觉得有必要学习一下。但这篇文章的重点放在<code>SpringSecurity6.x</code>的新变动了解以及<code>SpringSecurity5.x</code>版本的迁移上。</p>
<hr />
<h2 id="2-yue-du-qian-ti">2. 阅读前提</h2>
<p>这里写什么呢？<code>SpringSecurity6.0+</code>版本都更新了些什么东西，这里就简单给各位整理一下。注意这里所整理的一些更新是相较于<code>SpringSecurity5</code>版本来说的，因此这部分的内容并不适合小白阅读，因为这是建立在你已经有了一些<code>SpringSecurity</code>基础的前提下的，所以如果是完全没学过<code>SpringSecurity</code>的童鞋，建议看看这篇<a class="" href="https://blog.csdn.net/2302_76401343/article/details/137432951?spm=1001.2014.3001.5502">上古掌控安全的神:SpringSecurity初探揭秘</a>。它是是基于<code>SpringSecurity5</code>版本的快速入门文章，老肩巨猾,很好看，去看看吧。</p>
<h3 id="2-1-spring-boothe-spring-securityde-ban-ben-guan-xi">2.1 Spring Boot和Spring Security的版本关系</h3>
<p><code>Spring Boot 2 </code>默认为 <code>Spring Security 5</code>，而 <code>Spring Boot 3 </code>使用 <code>Spring Security 6</code>。所以记住这一点，后续系列的文章所有的案例都是基于<code>SpringBoot3</code>以及<code>Gradle</code>的组合来进行的，当然，如果你还是<code>Maven</code>玩家，其实就理解学习层面来说并没有本质上的影响，无非是在实际的项目中更换一种构建方式罢了，不要觉得一看到是<code>Gradle</code>系的例子就跑路:</p>
<p>“哎呦！这项目没用我心爱的<code>Maven</code>，不适合我，溜了溜了!!”</p>
<h3 id="2-2-spring-security-6-xin-de-bian-dong">2.2 Spring Security 6 新的变动</h3>
<p><img src="https://images.waer.ltd/notes/image-20240420184640041.png" alt="image-20240420184640041" loading="lazy" decoding="async" /></p>
<p><code>Spring Security 6</code> 引入了多项功能更新，以提高安全性和健壮性。<strong>它现在至少需要 Java 版本 17 并使用 <code>jakarta </code>命名空间。</strong>，这个<code>Java17</code>可能听说过，但是<code>jakarta </code>是什么鬼可能很多人没有了解过(这其中就有我一席之地)，下面是来自 <strong>通义千文</strong> 的解释:</p>
<blockquote>
<p>Jakarta 命名空间是Java生态系统中用于标识一组特定技术规范和API的标准前缀。这个命名空间起源于开源社区对Java企业版（Java EE）规范的继任者——Jakarta EE项目中的API和组件的重新命名。</p>
<p><strong>背景</strong>：</p>
<ul>
<li><strong>Java EE</strong>：最初由Sun Microsystems（后被Oracle收购）主导开发，是一套用于构建企业级Java应用程序的标准和规范集合，包括诸如Servlets、JSP、EJB、JMS、JPA等技术。这些规范定义了接口和行为，由第三方供应商（如IBM、Red Hat、Oracle等）提供具体的实现。Java EE规范中的API通常以<code>javax.*</code>命名空间开头。</li>
<li><strong>Oracle与Java EE</strong>：随着Oracle对Java EE的管理和发展方向引起社区的关注和担忧，2017年，Oracle宣布将Java EE移交给开源组织，并停止在Java EE 8之后的版本开发。随后，Eclipse基金会接手了Java EE的后续开发工作，并将其重命名为Jakarta EE。</li>
<li><strong>Jakarta EE</strong>：作为Java EE的开源替代品，Jakarta EE保留了大部分原有Java EE规范的功能和目标，但在治理模式、开发流程和知识产权等方面遵循更加开放和社区驱动的原则。为了反映这一转变，并避免与Oracle的商标权冲突，Eclipse基金会决定将所有相关的API包名从<code>javax.*</code>改为<code>jakarta.*</code>，形成了Jakarta命名空间。</li>
</ul>
<p><strong>Jakarta命名空间的意义</strong>：</p>
<ol>
<li><strong>法律与商标独立</strong>：更改至<code>jakarta.*</code>命名空间，标志着这些技术规范与Oracle的商标权脱钩，完全由Eclipse基金会和开源社区掌控，不受单一商业公司的控制。</li>
<li><strong>技术演进的新开端</strong>：Jakarta EE不仅沿袭了Java EE的核心规范，还在其基础上引入了新技术、新规范和现代化开发实践。使用新的命名空间象征着这一技术栈进入了一个新的发展阶段，不受过去版本约束，能够更快地响应市场需求和技术创新。</li>
<li><strong>清晰的版本分界</strong>：由于命名空间的改变，开发者和工具能够清楚地区分基于旧Java EE（<code>javax.*</code>）和新Jakarta EE（<code>jakarta.*</code>）构建的应用程序及其依赖。这有助于平滑迁移、避免混淆，并为兼容性问题提供了明确的基准。</li>
<li><strong>社区认同与生态建设</strong>：Jakarta命名空间体现了开源社区对这一技术栈所有权的认可和支持。随着越来越多的厂商和开发者采用Jakarta EE规范，围绕<code>jakarta.*</code>命名空间的开源库、框架、工具和服务生态系统逐渐形成，推动了企业级Java开发的持续发展。</li>
</ol>
</blockquote>
<p>别看™一大堆，其实你几乎可以不看他们，阅读一遍，有个简单的印象就好了。但<code>Java17</code>这块属于硬控，躲不开的。要想使用<code>Spring Security6</code>的话，还是得注意下哈。</p>
<p>下面简单列一下这个版本的主要变动:</p>
<ul>
<li>删除了 <code>WebSecurityConfigurerAdapter</code>，以支持基于组件的安全配置</li>
<li><code>authorizeRequests（）</code> 被删除并替换为 <code>authorizeHttpRequests（）</code> 以定义授权规则。</li>
<li>引入了 <code>requestMatcher（）</code> 和 <code>securityMatcher（）</code> 等方法来替换<code> antMatcher（）</code> 和 <code>mvcMatcher（）</code> 来配置请求资源的安全性
<ul>
<li><code>requestMatcher（）</code> 方法更安全，因为它为请求配置选择了适当的<code> RequestMatcher</code> 实现。</li>
</ul>
</li>
<li>弃用部分方法，如<code> cors（）</code> 和 <code>csrf（）</code> 推荐使用函数式编程。</li>
<li>一些注解上的变化….</li>
</ul>
<hr />
<h2 id="">3. 版本升级</h2>
<p>基于上一个标题列出得更新，这部分将会简单分享一下，如何将你项目中的 <code>SpringSecurity5</code>版本升级到 <code>Spring Security6</code> 版本，以适应最新的特性；这不算一个很大的版本迁移，但有必要了解新版特性以及如何使用它们。</p>
<ul>
<li><code>@Configuration</code>不再是<code>@EnableWebSecurity</code>注的一部分。因此我们在新版本(没有特殊说明，这里以及后续说的新版本和旧版本分别指的是<code>SpringSecurity6</code>和<code>SpringSecurity5</code>)中需要同时给配置类加上这两个注解。</li>
<li>新版本删除了 <code>WebSecurityConfigurerAdapter </code>类，并采用基于组件的配置,我们在些<code>SpringSecurity</code>配置类时不再需要继承这个<code>WebSecurityConfigurerAdapter</code>，因此，结合上面两点，新版本的配置应该是下面这样的:</li>
</ul>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>@</span><span style="color:#bf616a;">Configuration
</span><span>@</span><span style="color:#bf616a;">EnableWebSecurity
</span><span style="color:#b48ead;">public class </span><span style="color:#ebcb8b;">WebSecurityConfig </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    </span><span style="color:#65737e;">// more....
</span><span style="color:#eff1f5;">}
</span></code></pre>
<ul>
<li>新版本通过 <code>WebSecurityCustomizer bean</code> 来修改排除静态资源, 该接口替代了 <code>WebSecurityConfigurerAdapter </code>接口中的 <code>configure</code>。当然，现在大部分项目都是前后端分离，这个配置相对来说没那么常用，但也不妨碍我们进步！！！！</li>
</ul>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>@</span><span style="color:#bf616a;">Bean
</span><span style="color:#ebcb8b;">WebSecurityCustomizer </span><span style="color:#bf616a;">webSecurityCustomizer</span><span>() {
</span><span>   </span><span style="color:#b48ead;">return </span><span>(</span><span style="color:#bf616a;">web</span><span>) </span><span style="color:#b48ead;">-&gt;</span><span> web.</span><span style="color:#bf616a;">ignoring</span><span>().</span><span style="color:#bf616a;">requestMatchers</span><span>(&quot;</span><span style="color:#a3be8c;">/js/**</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">/css/**</span><span>&quot;);
</span><span>}
</span></code></pre>
<ul>
<li>通过注册 <code>InMemoryUserDetailsManager bean </code>来重构身份验证凭据逻辑:</li>
</ul>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>@</span><span style="color:#bf616a;">Bean
</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">UserDetailsService </span><span style="color:#bf616a;">userDetailsService </span><span>() {
</span><span>    </span><span style="color:#65737e;">// Define user information in memory
</span><span>    </span><span style="color:#65737e;">// Administrator
</span><span>    </span><span style="color:#ebcb8b;">UserDetails</span><span> adminUser = </span><span style="color:#ebcb8b;">User</span><span>.</span><span style="color:#bf616a;">withUsername</span><span>(&quot;</span><span style="color:#a3be8c;">八尺妖剑</span><span>&quot;) </span><span style="color:#65737e;">// Username
</span><span>            .</span><span style="color:#bf616a;">password</span><span>(&quot;</span><span style="color:#a3be8c;">$2a$10$5GgerupMYdknnk.ln/9jK.MrQ39IcoO9vILlgPHigpAQ10PbLsoHS</span><span>&quot;) </span><span style="color:#65737e;">// Password, {noop} for no encryption
</span><span>            .</span><span style="color:#bf616a;">roles</span><span>(&quot;</span><span style="color:#a3be8c;">admin</span><span>&quot;) </span><span style="color:#65737e;">// Assign roles
</span><span>            .</span><span style="color:#bf616a;">authorities</span><span>(&quot;</span><span style="color:#a3be8c;">ROLE_test:show</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">user:name</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">user:list</span><span>&quot;) 
</span><span>            .</span><span style="color:#bf616a;">build</span><span>();
</span><span>    </span><span style="color:#65737e;">// Build normal user information
</span><span>    </span><span style="color:#ebcb8b;">UserDetails</span><span> users = </span><span style="color:#ebcb8b;">User</span><span>.</span><span style="color:#bf616a;">withUsername</span><span>(&quot;</span><span style="color:#a3be8c;">李四</span><span>&quot;) </span><span style="color:#65737e;">// Username
</span><span>            .</span><span style="color:#bf616a;">password</span><span>(&quot;</span><span style="color:#a3be8c;">$2a$10$5GgerupMYdknnk.ln/9jK.MrQ39IcoO9vILlgPHigpAQ10PbLsoHS</span><span>&quot;) </span><span style="color:#65737e;">// Password, {noop} for no encryption
</span><span>            .</span><span style="color:#bf616a;">roles</span><span>(&quot;</span><span style="color:#a3be8c;">user</span><span>&quot;) </span><span style="color:#65737e;">// Assign role
</span><span>            .</span><span style="color:#bf616a;">build</span><span>();
</span><span>    </span><span style="color:#65737e;">// Store the constructed user information in SpringSecurity (in memory)
</span><span>    </span><span style="color:#ebcb8b;">InMemoryUserDetailsManager</span><span> userDetailsManager = </span><span style="color:#b48ead;">new </span><span style="color:#ebcb8b;">InMemoryUserDetailsManager</span><span>();
</span><span>    userDetailsManager.</span><span style="color:#bf616a;">createUser</span><span>(adminUser);
</span><span>    userDetailsManager.</span><span style="color:#bf616a;">createUser</span><span>(users);
</span><span>    </span><span style="color:#b48ead;">return</span><span> userDetailsManager;
</span><span>}
</span></code></pre>
<ul>
<li>HTTP 安全配置,在旧版本中，我们一般通过重写 <code>WebSecurityConfigurer </code>类中的 <code>configure </code>方法来配置 <code>HttpSecurity</code>。由于它在最新版本中被删除，新版的配置方式是通过<code>SecurityFilterChain bean</code> 来进行。</li>
</ul>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>@</span><span style="color:#bf616a;">Bean
</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">SecurityFilterChain </span><span style="color:#bf616a;">filterChain</span><span>(</span><span style="color:#ebcb8b;">HttpSecurity</span><span> httpSecurity) throws </span><span style="color:#ebcb8b;">Exception </span><span>{
</span><span>    </span><span style="color:#65737e;">// Configure CSRF to be disabled
</span><span>    httpSecurity.</span><span style="color:#bf616a;">csrf</span><span>(</span><span style="color:#ebcb8b;">AbstractHttpConfigurer</span><span>::</span><span style="color:#bf616a;">disable</span><span>);
</span><span>
</span><span>    </span><span style="color:#65737e;">// Configure request interception
</span><span>    httpSecurity.</span><span style="color:#bf616a;">authorizeHttpRequests</span><span>(</span><span style="color:#bf616a;">auth </span><span style="color:#b48ead;">-&gt;
</span><span>                    auth.</span><span style="color:#bf616a;">requestMatchers</span><span>(&quot;</span><span style="color:#a3be8c;">/to_login</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">/user</span><span>&quot;).</span><span style="color:#bf616a;">permitAll</span><span>().</span><span style="color:#bf616a;">anyRequest</span><span>().</span><span style="color:#bf616a;">authenticated</span><span>());
</span><span>
</span><span>    </span><span style="color:#65737e;">// Specify login method: form, BASIC, etc.
</span><span>    httpSecurity.</span><span style="color:#bf616a;">formLogin</span><span>(</span><span style="color:#bf616a;">form </span><span style="color:#b48ead;">-&gt;</span><span> form.</span><span style="color:#bf616a;">loginPage</span><span>(&quot;</span><span style="color:#a3be8c;">/to_login</span><span>&quot;) </span><span style="color:#65737e;">// Redirect to custom login page
</span><span>            .</span><span style="color:#bf616a;">loginProcessingUrl</span><span>(&quot;</span><span style="color:#a3be8c;">/doLogin</span><span>&quot;) </span><span style="color:#65737e;">// Handle frontend requests, path matches frontend request path
</span><span>            .</span><span style="color:#bf616a;">usernameParameter</span><span>(&quot;</span><span style="color:#a3be8c;">username</span><span>&quot;)
</span><span>            .</span><span style="color:#bf616a;">passwordParameter</span><span>(&quot;</span><span style="color:#a3be8c;">password</span><span>&quot;)
</span><span>            .</span><span style="color:#bf616a;">defaultSuccessUrl</span><span>(&quot;</span><span style="color:#a3be8c;">/index</span><span>&quot;) </span><span style="color:#65737e;">// Default page to redirect to after successful login
</span><span>    );
</span><span>    </span><span style="color:#b48ead;">return</span><span> httpSecurity.</span><span style="color:#bf616a;">build</span><span>();
</span><span>}
</span></code></pre>
<ul>
<li>当然，密码编码器的写法也可以通过注册<code>Bean</code>得方式来完成:</li>
</ul>
<pre data-lang="java" style="background-color:#2b303b;color:#c0c5ce;" class="language-java "><code class="language-java" data-lang="java"><span>@</span><span style="color:#bf616a;">Bean
</span><span style="color:#b48ead;">public </span><span style="color:#ebcb8b;">PasswordEncoder </span><span style="color:#bf616a;">passwordEncoderParser</span><span>() {
</span><span>    </span><span style="color:#65737e;">// Build the password encoder
</span><span>    </span><span style="color:#b48ead;">return new </span><span style="color:#ebcb8b;">BCryptPasswordEncoder</span><span>();
</span><span>}
</span></code></pre>

        </div>
      </div>
      <div class="prompt" id="terminal"><input
    type="text"
    id="setter"
    onkeydown="writeit(this, event);moveIt(this.value.length, event)"
    onchange="writeit(this, event)"
    onkeyup="writeit(this, event)"
    onkeypress="writeit(this, event);"
    >
<label for="setter" id="writer"> </label><b class="cursor" id="cursor"></b></div>
      <footer class="footer">
        <div class="footer-content">
          <p class="icp-info">
            <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer">黔ICP备2021010295号</a>
          </p>
        </div>
      </footer>
    </main>
  </body>

</html>
